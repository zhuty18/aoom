---
import BasicPage from "../layouts/BasicPage.astro"
import { SITE_TITLE, SITE_DESCRIPTION, date } from "../consts"
import { getCollection } from "astro:content"
import PostList from "../components/PostList.astro"

const posts = await getCollection("docs")
const displayPosts = posts
  .filter((post) => post.data.post)
  .sort((a, b) => date(b.data).valueOf() - date(a.data).valueOf())
---

<BasicPage title={SITE_TITLE} | {SITE_DESCRIPTION}>
  <slot name="title" slot="title">
    {SITE_TITLE}
  </slot>
  <slot name="description" slot="description">
    {SITE_DESCRIPTION}
  </slot>
  <PostList posts={displayPosts} />
</BasicPage>
